# LizaAlert (frontend)

Платформа для обучения добровольцев "ЛизаАлерт" - Frontend

## Полезные ссылки:

### [Notion](https://www.notion.so/Workspase-1078a8066a6e45fbb9ad07854f7e0f38)

### [Макет](https://www.figma.com/file/FasUcYffR2kJAhPvBGcACW/LizaAlert-Mockups?node-id=155%3A5905)

### [Storybook](https://lizaalert-storybook.netlify.app/)

## Стек:

- React
- TypeScript
- react-router-dom v6
- Redux Toolkit
- Axios
- SCSS module
- Docker & Nginx
- Storybook

## [Стайлгайд](./docs/style-guide.md)

## Инструкции по запуску dev-режима

Версия Node.js должна быть не менее `v16`

1. Установить зависимости командой:

```bash
npm ci
```

Пакеты поставятся на основе дерева в `package-lock.json`.

Обновлять зависимости тоже этой командой. В дальнейшем в PR не должно быть изменений `package-lock.json` за исключением тех случаев, когда нужно поставить в проект новый пакет.

2. После установки зависимостей выполнить команду:

```bash
npm run husky:init
```

Команда создаст исполняемый файл `husky.sh` в директорию `.husky/_`. Если файла не появилось, отключите антивирус и попробуйте запустить её снова. В терминале должна появиться надпись `husky - Git hooks installed`

После этого можно писать код и коммитить.

### Запуск базовой версии

```bash
npm start
```

### Запуск версии администратора (админка)

```bash
npm run start:admin
```

Приложение откроется на порту `:3000`

---

### Запустить Storybook

```bash
npm run storybook
```

Storybook откроется на порту `:6006`

## Файловая структура:

Приложение построено на основе атомарного дизайна.
Распределение по директориям:

- **components\atoms**: простые компоненты, из которых строятся более сложные
  компоненты. Не могут включать в себя другие атомы.
- **components\molecules**: состоят из атомов и представляют собой цельный
  полезный элемент. Включают простую логику и свои стили.
- **components\organisms**: сочетания молекул, существующих вместе. Также могут
  включать в себя атомы.
- **components\templates**: разметка. В разметке не может быть бизнес-логики и
  состояния.
- **components\pages**: конечная точка роутера, финальный рендер целой страницы.
- **api**: файлы запросов к API.
- **assets**: изображения, шрифты и иконки.
- **config**: конфигурационные файлы проекта.
- **hooks**: кастомные реакт-хуки.
- **lib**: самописные библиотеки.
- **router**: роутер проекта.
- **services**: сервисы по обработке данных.
- **store**: файлы по работе с глобальным стором (в данный момент используется
  Redux).
- **types**: файлы с глобальными и конфигурационными типами.
- **utils**: утилитарные простые функции и глобальные константы.

## Работа с git:

1. Участник клонирует проект
2. Создаёт ветку с нужным префиксом
3. Комитит изменения, в начале названия комита пишет номер задачи который он
   решает со знака #, например "#21-created-Button-component"
4. По окончанию работы над задачей делает Pull Request
5. После оформления Pull Request запускаются тесты.
   Если рядом с PR есть красный крестик, значит код в PR невалидный.
   Смотрим тесты, ищем причину, по которой они не прошли, исправляем, снова
   комитим в ту же ветку.

Пример наименование ветки: enhancement-14-index-page

- enhancement - префикс
- 14 - id задачи
- index-page - краткое описание

## Префиксы:

- **api**: изменение API
- **bench**: изменения в наборе бенчмарков
- **build**: изменение, связанное со сборкой проекта
- **bug**: исправление ошибок, багов
- **deprecation**: убираем легаси
- **development**: разработка фичи/компонента
- **documentation**: документация
- **enhancement**: улучшение, доработки уже существующей фичи
- **maintenance**: всякий техдолг (рефакторинг, опечатки и т.д.)
- **revert**: откат на раннюю реализацию
- **style**: исправление стиля (пробел, PEP8)
- **test**: добавление или изменение тестов
- **release**: связанный с выпуском

Префиксы веток описаны
тут: https://github.com/marketplace/actions/prefix-pr-labeler#release-drafter-category-settings

## Чеклист перед сдачей на ревью:

- Все пункты [стайлгайда](./docs/style-guide.md)
- Не допускать ошибок в консоли
- Использовать миксины и scss - переменные
- Использовать готовые компоненты, следить за изменениями проекта
- Осуществлять экспорт компонентов через файлы index.ts
- Выносить объявление функций из props
- Обновлять стейт с учётом последнего состояния
- Выносить “магические значения” в константы
- Удалять обработчики при размонтировании компонентов, следить за утечками
  памяти
